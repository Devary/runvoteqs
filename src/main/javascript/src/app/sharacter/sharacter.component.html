<p-toolbar styleClass="mb-6">
  <ng-template #start>
    <p-button label="New" icon="pi pi-plus" severity="secondary" class="mr-2" (onClick)="openNew()" />
  </ng-template>

  <ng-template #end>
    <p-button label="Export" icon="pi pi-upload" severity="secondary" (onClick)="exportCSV()" />
    <fa-icon [icon]="faCoffee"></fa-icon>
  </ng-template>
</p-toolbar>
<p-table
  #dt
  [value]="sharacters"
  (onLazyLoad)="sharacters"
  (change)="refreshTable()"
  [paginator]="true"
  [rows]="20"
  [tableStyle]="{ 'min-width': '50rem' }"
  [rowsPerPageOptions]="[5, 10, 20]"
>
  <ng-template pTemplate="header">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Description</th>
      <th>Role</th>
      <th>Action</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-sharacter>
    <tr>
      <td>{{ sharacter.id }}</td>
      <td>{{ sharacter.name }}</td>
      <td>{{ sharacter.description }}</td>
      <td><label *ngFor="let role of sharacter.role">
        {{ role.name }}
      </label></td>
      <td><p-button icon="pi pi-trash" severity="danger" (onClick)="delete(sharacter.id)" /><p-button icon="pi pi-pencil" severity="info" (onClick)="edit(sharacter.id)" /></td>
    </tr>
  </ng-template>
</p-table>


<p-dialog [(visible)]="createSharacterDialog" [style]="{ width: '450px',height:'100%' }" header="Sharacter Details" [modal]="true" (onHide)="hideDialog()" (change)="debug($event)">
  <ng-template #content>
    <div class="flex flex-col gap-6">
        <div>
          <label for="name" class="block font-bold mb-3">Name*</label>
          <input type="text" id="name" pInputText [(ngModel)]="sharacter.name"  autofocus fluid />
          <small class="text-gray-500">Name must contains at least 4 characters.</small>
        </div>
        <div>
          <label for="description" class="block font-bold mb-3">Description*</label>
          <textarea id="description" pTextarea required rows="3" [(ngModel)]="sharacter.description" cols="20" fluid></textarea>
        </div>
      <div>
        <label for="role" class="block font-bold mb-3">Role*</label>
        <p-multiselect [options]="roles" optionLabel="name" placeholder="Select Roles" [(ngModel)]="sharacter.role" [maxSelectedLabels]="3" styleClass="w-full md:w-80"  id="role" ></p-multiselect>
      </div>
      </div>
  </ng-template>

    <ng-template #footer>
      <p-button label="Cancel" icon="pi pi-times" text (click)="hideDialog()" />
      <p-button label="Save" icon="pi pi-plus" text (onClick)="processEntity()" />
    </ng-template>
</p-dialog>
